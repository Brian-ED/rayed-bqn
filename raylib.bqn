rayFFIâ‡â€¢Import "rayffi.bqn"

IsInt â† {(âŒˆâŸœ=ğ•©)!Ëœ" has to be int"âˆ¾Ëœğ•¨âŠ£"ğ•©"}

_bitwiseâ‡{
  _intoâ†{ğ•—_ğ•£â¼ğ•©: ğ•—âŠ¸Ã—âŠ¸+ËœÂ´ğ•©; ğ•—|âŒŠâˆ˜Ã·âŸœğ•—âŸ(â†•1+Â·âŒŠğ•—â‹†â¼1âŒˆâŠ¢)ğ•©}
  ğ•—{_ğ•£:(ğ”½Â´âŒˆâ—‹â‰ â†‘Â¨â‹ˆ)âŒ¾(2 _into)}
}

IsKeyPressed â‡ {ğ•Š key:
  0â‰ rayFFI.IsKeyPressed-âŸœ@âŸ(âˆâŠ¸<)ğ•©
}âš‡0

image â‡ {
  Load   â‡ {ğ•ŠstrPath: âŠ‘rayFFI.LoadImageğ•©âˆ¾@} # âŠ‘ used because LoadImage outputs imageâ€¿strPath for unknown reasons.
  Unload â‡ {ğ•Šimage:    rayFFI.UnloadImageğ•©}
  _with  â‡ {(UnloadâŠ¢ğ”½)Loadğ•©}
}


window â‡ {
  âŸ¨_init â‹„ Close
   SetIcon â‹„ SetBackground â‹„ SetToResizableâŸ©â‡

  Init â† {posXâ€¿posY ğ•Š title: 
    "ğ•© can only be ints"!âˆ§Â´âŒˆâŠ¸=ğ•©
    rayFFI.InitWindow (ğ•¨âŠ£2â¥Š1000)âˆ¾<ğ•©âˆ¾@
    rayFFI.SetTargetFPS 60
  }
  Close â† rayFFI.WindowShouldCloseâˆ˜âŸ¨âŸ©
  SetBackground â† {ğ•Šrâ€¿gâ€¿bâ€¿t:
    (âˆ§Â´ğ•©âˆŠâ†•256)!Ëœ"ClearBackground only accepts ints in the range 0-255 inclusive"
    rayFFI.ClearBackground ğ•©
  }
  # Needs to test input for image
  SetIcon â† {rayFFI.SetWindowIconğ•©}

  # Make this modify window settings instead of overwrite
  Setting â† {
     ğ•Š"fps":rayFFI.GetFPSâŸ¨âŸ©
   ;ğ•¨ğ•Š"fps":
      "ğ•© has to be int"!1â‰¡âŒˆâŠ¸=ğ•©
      rayFFI.SetTargetFPS ğ•©
   ;ğ•¨ğ•Š"resize":
      "ğ•© has to be 0 or 1"!1<âŠ¸â‰¡ğ•¨âˆŠâ†•2
      rayFFI.SetWindowStateğ•©Ã—4
    ğ•Š"resize":
    isWindowState 
  }
}

draw â‡ { 
  âŸ¨Start â‹„ End â‹„ _with 
   _Circle â‹„ _RectangleâŸ©â‡

  Start â† rayFFI.EndDrawing  âˆ˜âŸ¨âŸ©
  End   â† rayFFI.BeginDrawingâˆ˜âŸ¨âŸ©
  _with â† {Endğ”½ğ•©âŠ£Start@}

  _Circle â† {radius âŸ¨r,g,b,tâŸ©_ğ•£ posXâ€¿posY :
    "only accepts ints as args"    !âˆ§Â´âŒŠâŠ¸=aâ†ğ•©âˆ¾ğ•¨âˆ¾ğ•—
    "Incorrect amount of arguments"!7=â‰ a
    rayFFI.DrawCircle âŒŠğ•©âˆ¾ğ•¨â€¿ğ•—
  }

  _Rectangle â† {widthâ€¿height âŸ¨r,g,b,tâŸ©_ğ•£ posXâ€¿posY :
    "Rectangle only accepts ints as args"!âˆ§Â´âŒˆâŠ¸=aâ†ğ•©âˆ¾ğ•¨âˆ¾ğ•—
    rayFFI.DrawRectangle âŒŠ(ğ•©âˆ¾ğ•¨)âˆ¾<ğ•—
  }
}


c â‡ {
  whiteâ‡4â¥Š255 â‹„ blackâ‡Â¯4â†‘255
  [red    â€¿green â€¿blue
   magentaâ€¿yellowâ€¿cyan]â‡255Ã—1âˆ¾ËœÂ¨â‰(-â†•3)âŒ½âŒœâ‹ˆâŸœÂ¬3â†‘1
}

k â‡ {
  # consider switching to `letter-@` when possible.

# vars           Keycodes   Keys
  kNULL          â‡ 0        # NULL, used for no key pressed
  # Alphanumeric keys
  kAPOSTROPHE    â‡ 39       # '
  kCOMMA         â‡ 44       # ,
  kMINUS         â‡ 45       # -
  kPERIOD        â‡ 46       # .
  kSLASH         â‡ 47       # /
  kZERO          â‡ 48       # 0
  kONE           â‡ 49       # 1
  kTWO           â‡ 50       # 2
  kTHREE         â‡ 51       # 3
  kFOUR          â‡ 52       # 4
  kFIVE          â‡ 53       # 5
  kSIX           â‡ 54       # 6
  kSEVEN         â‡ 55       # 7
  kEIGHT         â‡ 56       # 8
  kNINE          â‡ 57       # 9
  kSEMICOLON     â‡ 59       # ;
  kEQUAL         â‡ 61       # =
  kA             â‡ 65       # A | a
  kB             â‡ 66       # B | b
  kC             â‡ 67       # C | c
  kD             â‡ 68       # D | d
  kE             â‡ 69       # E | e
  kF             â‡ 70       # F | f
  kG             â‡ 71       # G | g
  kH             â‡ 72       # H | h
  kI             â‡ 73       # I | i
  kJ             â‡ 74       # J | j
  kK             â‡ 75       # K | k
  kL             â‡ 76       # L | l
  kM             â‡ 77       # M | m
  kN             â‡ 78       # N | n
  kO             â‡ 79       # O | o
  kP             â‡ 80       # P | p
  kQ             â‡ 81       # Q | q
  kR             â‡ 82       # R | r
  kS             â‡ 83       # S | s
  kT             â‡ 84       # T | t
  kU             â‡ 85       # U | u
  kV             â‡ 86       # V | v
  kW             â‡ 87       # W | w
  kX             â‡ 88       # X | x
  kY             â‡ 89       # Y | y
  kZ             â‡ 90       # Z | z
  kLEFT_BRACKET  â‡ 91       # [
  kBACKSLASH     â‡ 92       # '\'
  kRIGHT_BRACKET â‡ 93       # ]
  kGRAVE         â‡ 96       # `
  # Function keys
  kSPACE         â‡ 32       # Space
  kESCAPE        â‡ 256      # Esc
  kENTER         â‡ 257      # Enter
  kTAB           â‡ 258      # Tab
  kBACKSPACE     â‡ 259      # Backspace
  kINSERT        â‡ 260      # Ins
  kDELETE        â‡ 261      # Del
  kRIGHT         â‡ 262      # Cursor right
  kLEFT          â‡ 263      # Cursor left
  kDOWN          â‡ 264      # Cursor down
  kUP            â‡ 265      # Cursor up
  kPAGE_UP       â‡ 266      # Page up
  kPAGE_DOWN     â‡ 267      # Page down
  kHOME          â‡ 268      # Home
  kEND           â‡ 269      # End
  kCAPS_LOCK     â‡ 280      # Caps lock
  kSCROLL_LOCK   â‡ 281      # Scroll down
  kNUM_LOCK      â‡ 282      # Num lock
  kPRINT_SCREEN  â‡ 283      # Print screen
  kPAUSE         â‡ 284      # Pause
  kF1            â‡ 290      # F1
  kF2            â‡ 291      # F2
  kF3            â‡ 292      # F3
  kF4            â‡ 293      # F4
  kF5            â‡ 294      # F5
  kF6            â‡ 295      # F6
  kF7            â‡ 296      # F7
  kF8            â‡ 297      # F8
  kF9            â‡ 298      # F9
  kF10           â‡ 299      # F10
  kF11           â‡ 300      # F11
  kF12           â‡ 301      # F12
  kLEFT_SHIFT    â‡ 340      # Shift left
  kLEFT_CONTROL  â‡ 341      # Control left
  kLEFT_ALT      â‡ 342      # Alt left
  kLEFT_SUPER    â‡ 343      # Super left
  kRIGHT_SHIFT   â‡ 344      # Shift right
  kRIGHT_CONTROL â‡ 345      # Control right
  kRIGHT_ALT     â‡ 346      # Alt right
  kRIGHT_SUPER   â‡ 347      # Super right
  kKB_MENU       â‡ 348      # KB menu
  # Keypad keys
  kKP_0          â‡ 320      # Keypad 0
  kKP_1          â‡ 321      # Keypad 1
  kKP_2          â‡ 322      # Keypad 2
  kKP_3          â‡ 323      # Keypad 3
  kKP_4          â‡ 324      # Keypad 4
  kKP_5          â‡ 325      # Keypad 5
  kKP_6          â‡ 326      # Keypad 6
  kKP_7          â‡ 327      # Keypad 7
  kKP_8          â‡ 328      # Keypad 8
  kKP_9          â‡ 329      # Keypad 9
  kKP_DECIMAL    â‡ 330      # Keypad .
  kKP_DIVIDE     â‡ 331      # Keypad /
  kKP_MULTIPLY   â‡ 332      # Keypad *
  kKP_SUBTRACT   â‡ 333      # Keypad -
  kKP_ADD        â‡ 334      # Keypad +
  kKP_ENTER      â‡ 335      # Keypad Enter
  kKP_EQUAL      â‡ 336      # Keypad =
  kBACK          â‡ 4        # Android back button
  kMENU          â‡ 82       # Android menu button
  kVOLUME_UP     â‡ 24       # Android volume up button
  kVOLUME_DOWN   â‡ 25       # Android volume down button
}