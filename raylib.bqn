rayFFIâ‡â€¢Import "rayffi.bqn"

_bitwiseâ‡{
  _intoâ‡{ğ•—_ğ•£â¼ğ•©: ğ•—âŠ¸Ã—âŠ¸+ËœÂ´ğ•©; ğ•—|âŒŠâˆ˜Ã·âŸœğ•—âŸ(â†•1+Â·âŒŠğ•—â‹†â¼1âŒˆâŠ¢)ğ•©}
  ğ•—{_ğ•£:(ğ”½Â´âŒˆâ—‹â‰ â†‘Â¨â‹ˆ)âŒ¾(2 _into)}
}



IsKeyPressed â‡ {ğ•Š key:
  0â‰ rayFFI.IsKeyPressed-âŸœ@âŸ(âˆâŠ¸<)ğ•©
}âš‡0

image â‡ {
  Load   â‡ {ğ•ŠstrPath: âŠ‘rayFFI.LoadImageğ•©âˆ¾@} # âŠ‘ used because LoadImage outputs imageâ€¿strPath for unknown reasons.
  Unload â‡ {ğ•Šimage:  @âŠ£rayFFI.UnloadImageğ•©}
  _with  â‡ {(UnloadâŠ¢ğ”½)Loadğ•©}
}


window â‡ {
  âŸ¨_init â‹„ Close
   SetIcon â‹„ ClearBackground â‹„ SetToResizableâŸ©â‡

  _init â† {title _ğ•£ posXâ€¿posY: fpsâ†ğ•¨âŠ£60
    "ğ•© can only be ints"!âˆ§Â´âŒˆâŠ¸=ğ•©
    rayFFI.InitWindow ğ•©âˆ¾<ğ•—âˆ¾@
    rayFFI.SetTargetFPS fps
  }
  Close â† rayFFI.WindowShouldCloseâˆ˜âŸ¨âŸ©

  ClearBackground â† {ğ•Šrâ€¿gâ€¿bâ€¿t:
    "ClearBackground only accepts ints as args"!âˆ§Â´âŒˆâŠ¸=ğ•©
    rayFFI.ClearBackground ğ•©
  }

  SetIcon     â† {rayFFI.SetWindowIconğ•©}

  # Make this modify window settings instead of overwrite
  SetToResizable â† rayFFI.SetWindowStateâˆ˜4
}

draw â‡ { 
  âŸ¨Start â‹„ End â‹„ _with 
   _Circle â‹„ _RectangleâŸ©â‡

  Start â† rayFFI.EndDrawing  âˆ˜âŸ¨âŸ©
  End   â† rayFFI.BeginDrawingâˆ˜âŸ¨âŸ©
  _with â† {Endğ”½ğ•©âŠ£Start@}

  _Circle â† {radius âŸ¨r,g,b,tâŸ©_ğ•£ posXâ€¿posY :
    "only accepts ints as args"    !âˆ§Â´âŒŠâŠ¸=aâ†ğ•©âˆ¾ğ•¨âˆ¾ğ•—
    "Incorrect amount of arguments"!7=â‰ a
    rayFFI.DrawCircle âŒŠğ•©âˆ¾ğ•¨â€¿ğ•—
  }

  _Rectangle â† {widthâ€¿height âŸ¨r,g,b,tâŸ©_ğ•£ posXâ€¿posY :
    "Rectangle only accepts ints as args"!âˆ§Â´âŒˆâŠ¸=aâ†ğ•©âˆ¾ğ•¨âˆ¾ğ•—
    rayFFI.DrawRectangle âŒŠ(ğ•©âˆ¾ğ•¨)âˆ¾<ğ•—
  }
}


c â‡ {
  whiteâ‡4â¥Š255 â‹„ blackâ‡Â¯4â†‘255
  [red    â€¿green â€¿blue
   magentaâ€¿yellowâ€¿cyan]â‡255Ã—1âˆ¾ËœÂ¨â‰(-â†•3)âŒ½âŒœâ‹ˆâŸœÂ¬3â†‘1
}

k â‡ {
  # switch to `letter-@` when possible.
  # I'm keeping these for look up and for ease of use.

  kNULL          â‡ 0        # Key: NULL, used for no key pressed
  # Alphanumeric keys
  kAPOSTROPHE    â‡ 39       # Key: '
  kCOMMA         â‡ 44       # Key: ,
  kMINUS         â‡ 45       # Key: -
  kPERIOD        â‡ 46       # Key: .
  kSLASH         â‡ 47       # Key: /
  kZERO          â‡ 48       # Key: 0
  kONE           â‡ 49       # Key: 1
  kTWO           â‡ 50       # Key: 2
  kTHREE         â‡ 51       # Key: 3
  kFOUR          â‡ 52       # Key: 4
  kFIVE          â‡ 53       # Key: 5
  kSIX           â‡ 54       # Key: 6
  kSEVEN         â‡ 55       # Key: 7
  kEIGHT         â‡ 56       # Key: 8
  kNINE          â‡ 57       # Key: 9
  kSEMICOLON     â‡ 59       # Key: ;
  kEQUAL         â‡ 61       # Key: =
  kA             â‡ 65       # Key: A | a
  kB             â‡ 66       # Key: B | b
  kC             â‡ 67       # Key: C | c
  kD             â‡ 68       # Key: D | d
  kE             â‡ 69       # Key: E | e
  kF             â‡ 70       # Key: F | f
  kG             â‡ 71       # Key: G | g
  kH             â‡ 72       # Key: H | h
  kI             â‡ 73       # Key: I | i
  kJ             â‡ 74       # Key: J | j
  kK             â‡ 75       # Key: K | k
  kL             â‡ 76       # Key: L | l
  kM             â‡ 77       # Key: M | m
  kN             â‡ 78       # Key: N | n
  kO             â‡ 79       # Key: O | o
  kP             â‡ 80       # Key: P | p
  kQ             â‡ 81       # Key: Q | q
  kR             â‡ 82       # Key: R | r
  kS             â‡ 83       # Key: S | s
  kT             â‡ 84       # Key: T | t
  kU             â‡ 85       # Key: U | u
  kV             â‡ 86       # Key: V | v
  kW             â‡ 87       # Key: W | w
  kX             â‡ 88       # Key: X | x
  kY             â‡ 89       # Key: Y | y
  kZ             â‡ 90       # Key: Z | z
  kLEFT_BRACKET  â‡ 91       # Key: [
  kBACKSLASH     â‡ 92       # Key: '\'
  kRIGHT_BRACKET â‡ 93       # Key: ]
  kGRAVE         â‡ 96       # Key: `
  # Function keys
  kSPACE         â‡ 32       # Key: Space
  kESCAPE        â‡ 256      # Key: Esc
  kENTER         â‡ 257      # Key: Enter
  kTAB           â‡ 258      # Key: Tab
  kBACKSPACE     â‡ 259      # Key: Backspace
  kINSERT        â‡ 260      # Key: Ins
  kDELETE        â‡ 261      # Key: Del
  kRIGHT         â‡ 262      # Key: Cursor right
  kLEFT          â‡ 263      # Key: Cursor left
  kDOWN          â‡ 264      # Key: Cursor down
  kUP            â‡ 265      # Key: Cursor up
  kPAGE_UP       â‡ 266      # Key: Page up
  kPAGE_DOWN     â‡ 267      # Key: Page down
  kHOME          â‡ 268      # Key: Home
  kEND           â‡ 269      # Key: End
  kCAPS_LOCK     â‡ 280      # Key: Caps lock
  kSCROLL_LOCK   â‡ 281      # Key: Scroll down
  kNUM_LOCK      â‡ 282      # Key: Num lock
  kPRINT_SCREEN  â‡ 283      # Key: Print screen
  kPAUSE         â‡ 284      # Key: Pause
  kF1            â‡ 290      # Key: F1
  kF2            â‡ 291      # Key: F2
  kF3            â‡ 292      # Key: F3
  kF4            â‡ 293      # Key: F4
  kF5            â‡ 294      # Key: F5
  kF6            â‡ 295      # Key: F6
  kF7            â‡ 296      # Key: F7
  kF8            â‡ 297      # Key: F8
  kF9            â‡ 298      # Key: F9
  kF10           â‡ 299      # Key: F10
  kF11           â‡ 300      # Key: F11
  kF12           â‡ 301      # Key: F12
  kLEFT_SHIFT    â‡ 340      # Key: Shift left
  kLEFT_CONTROL  â‡ 341      # Key: Control left
  kLEFT_ALT      â‡ 342      # Key: Alt left
  kLEFT_SUPER    â‡ 343      # Key: Super left
  kRIGHT_SHIFT   â‡ 344      # Key: Shift right
  kRIGHT_CONTROL â‡ 345      # Key: Control right
  kRIGHT_ALT     â‡ 346      # Key: Alt right
  kRIGHT_SUPER   â‡ 347      # Key: Super right
  kKB_MENU       â‡ 348      # Key: KB menu
  # Keypad keys
  kKP_0          â‡ 320      # Key: Keypad 0
  kKP_1          â‡ 321      # Key: Keypad 1
  kKP_2          â‡ 322      # Key: Keypad 2
  kKP_3          â‡ 323      # Key: Keypad 3
  kKP_4          â‡ 324      # Key: Keypad 4
  kKP_5          â‡ 325      # Key: Keypad 5
  kKP_6          â‡ 326      # Key: Keypad 6
  kKP_7          â‡ 327      # Key: Keypad 7
  kKP_8          â‡ 328      # Key: Keypad 8
  kKP_9          â‡ 329      # Key: Keypad 9
  kKP_DECIMAL    â‡ 330      # Key: Keypad .
  kKP_DIVIDE     â‡ 331      # Key: Keypad /
  kKP_MULTIPLY   â‡ 332      # Key: Keypad *
  kKP_SUBTRACT   â‡ 333      # Key: Keypad -
  kKP_ADD        â‡ 334      # Key: Keypad +
  kKP_ENTER      â‡ 335      # Key: Keypad Enter
  kKP_EQUAL      â‡ 336      # Key: Keypad =
  kBACK          â‡ 4        # Key: Android back button
  kMENU          â‡ 82       # Key: Android menu button
  kVOLUME_UP     â‡ 24       # Key: Android volume up button
  kVOLUME_DOWN   â‡ 25       # Key: Android volume down button
}