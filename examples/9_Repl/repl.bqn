âŸ¨coâ‡color,window,âŸ¨_withCanvas_âŸ©â‡draw,kâ‡keyâŸ©â†râ†â€¢Import "../../raylib.bqn"
âŸ¨lf,SplitâŸ© â† â€¢Import "../../src/imports/bqn-libs/strings.bqn"
fontSizeâ†50
lineSpacing â† 40
DrawEllipses â† {frameğ•Šposes:
  {(|ğ•0â€¿100-100|frame) co.white r.draw._EllipseOutline poses}Â¨âŠ¢â€¿âŒ½
}Â¨
sysvals â† âŸ¨
  "out"â€¿â€¢Out
  "show"â€¿â€¢Show
  "type"â€¿â€¢Type
  "sh"â€¿â€¢Sh
  "decompose"â€¿â€¢Decompose
  "while"â€¿â€¢While
  "bqn"â€¿â€¢BQN
  "cmp"â€¿â€¢Cmp
  "unixtime"â€¿â€¢UnixTime
  "monotime"â€¿â€¢Monotime
  "timed"â€¿â€¢_timed
  "delay"â€¿â€¢Delay
  "hash"â€¿â€¢Hash
  "repr"â€¿â€¢Repr
#  "parsefloat"â€¿â€¢ParseFloat
  "fmt"â€¿â€¢FMT
  "glyph"â€¿â€¢Glyph
  "makerand"â€¿â€¢MakeRand
  "rebqn"â€¿â€¢ReBQN
  "fromutf8"â€¿â€¢FromUTF8
  "toutf8"â€¿â€¢ToUTF8
  "math"â€¿â€¢Math
  "rand"â€¿â€¢Rand
  "term"â€¿â€¢term
  "bit"â€¿â€¢bit
  "primitives"â€¿â€¢primitives
  "internal"â€¿â€¢internal
  "fchars"â€¿â€¢Fchars
  "fbytes"â€¿â€¢FBytes
  "flines"â€¿â€¢FLines
  "import"â€¿â€¢Import
  "ffi"â€¿â€¢FFI
  "name"â€¿â€¢name
  "path"â€¿â€¢path
  "wdpath"â€¿â€¢wdpath
  "file"â€¿â€¢file
  "state"â€¿â€¢state
  "args"â€¿âŸ¨âŸ©
#  "ns"â€¿â€¢ns
  "drawellipses"â€¿DrawEllipses
  "r"â€¿r
âŸ©

Game â† {ğ•¤
    window.SetPos 0â€¿540

    fontâ†r.font.LoadBQN fontSize
    DrawText â† {posğ•Šstr:r.rayFFI.DrawTextCodepoints âŸ¨font, str-@, â‰ str, pos, fontSize, 1, co.blueâŸ©}
    bqn â† â€¢ReBQN{
        sâ†sysvalsâˆ¾<"drawtext"â€¿DrawText
        system â‡ sâˆ¾<"listsys"(âŠ£â‹ˆ<âŠ¸âˆ¾)âŠ‘Â¨s
        repl   â‡ "loose"
    }
    KeyFuncâ†{kyğ•Šsâ€¿fâ€¿p: Nâ†0âŒˆ-âŸœ1 â‹„ Aâ†(â‰ s)âŒŠ+âŸœ1 â‹„ {
     k.backspaceâ‰¡ky? âŸ¨p(NâŠ¸â†‘âˆ¾â†“)sâ‹„fâ‹„N pâŸ©
    ;k.enterâ‰¡ky?
        Â¬âˆ˜r.rayffi.IsKeyDownâˆ˜341â—¶âŸ¨
            {âŸ¨p(â†‘âˆ¾lfâˆ¾â†“)ğ•©â‹„fâ‹„A pâŸ©}
            (3â‰¡â€¢Type)â—¶âŸ¨
                {(<âˆ¾fâ‹ˆâ‰ )â€¢ReprâŠ""ğ•©}
                {(<âˆ¾(fâˆ¾ğ•©)â‹ˆâ‰ )"Activating function per frame"}
            âŸ©BQNâŠâ€¢currentError
        âŸ©s
    ;k.leftâ‰¡ky?  sâ€¿fâˆ¾N p
    ;k.rightâ‰¡ky? sâ€¿fâˆ¾A p
    ;sâ€¿fâ€¿p
    }}
    # Perframe
    {ğ•Šsâ€¿fâ€¿p:
        kyâ€¿c â† {1â†“ğ•âŠ¸âˆ¾â€¢_While_(âˆ§Â´0â€¿@â‰ âŠ‘)ğ•@}Â¨k.PressedKeyâ€¿k.PressedChar # Input
        {kyâ€¿cğ•s}Â¨f
        # â€¢ShowâŸ(âŸ¨âŸ©âŠ¸â‰¢)k # debugging
        nsâ†âŠ‘râ†(((â‰ c)+âŠ£)â‹ˆâ†‘âˆ¾câˆ¾â†“)Â´âŒ¾(2â€¿0âŠ¸âŠ)sâ€¿fâ€¿p KeyFuncÂ´ky
        {DrawTextËœÂ´Â¨(âŠ¢â‹ˆÂ¨50âˆ¾Â¨50Ã—â†•âˆ˜â‰ )lf Splitğ•©}_withCanvas_ co.black ns # Rendering
        r
    }â€¢_While_(Â¬window.ShouldClose) ""â€¿âŸ¨âŸ©â€¿0

    r.rayffi.UnloadFont font
}
1â€¿0.5 Game window._openAs "BQN Repl"
