# This example depends on raygui

âŸ¨âŸ¨red, white, black, raywhiteâŸ©â‡color, window, draw, rfâ‡raylib, lowâŸ©â†râ†â€¢Import "../../rayed.bqn"
rg â† â€¢Import "../../ffi/raygui.bqn"

âŸ¨
  guiControl
  guiControlProperty
  guiScrollBarProperty
  guiSliderProperty
  guiListViewProperty
âŸ©â† rg

xâ€¿yâ€¿widthâ€¿height â† â†•4 # indecies of rectangle
panelRec â† 20â€¿40â€¿200â€¿150

# Draw and process scroll bar style edition controls
DrawStyleEditControls â† {ğ•ŠborderWidthâ€¿arrowsSizeâ€¿sliderPaddingâ€¿sliderWidthâ€¿arrowVisibleâ€¿scrollbarSideâ€¿scrollbarWidth:
  # ScrollPanel style controls
  #----------------------------------------------------------
  rg.GuiGroupBox 550â€¿170â€¿220â€¿205â‹ˆ"SCROLLBAR STYLE"

  Â·â€¿âŸ¨tempBorderWidthâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿190â€¿90â€¿20, 20â†‘"BORDER_WIDTH", âŸ¨borderWidthâŸ©, 0, 6, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.scrollbarâ‹„guiControlProperty.border_widthâ‹„tempBorderWidthâŸ©
  
  Â·â€¿âŸ¨newArrowsSizeâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿215â€¿90â€¿20, 21â†‘"ARROWS_SIZE", âŸ¨arrowsSizeâŸ©, 4, 14, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.scrollbarâ‹„guiScrollBarProperty.arrowsSizeâ‹„newArrowsSizeâŸ©

  Â·â€¿âŸ¨tempSliderPaddingâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿240â€¿90â€¿20, 20â†‘"SLIDER_PADDING", âŸ¨sliderPaddingâŸ©, 0, 14, 0âŸ©
  Â·â€¿âŸ¨newSliderPaddingâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿320â€¿90â€¿20, 20â†‘"SLIDER_PADDING", âŸ¨tempSliderPaddingâŸ©, 0, 14, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.scrollbarâ‹„guisliderproperty.slider_paddingâ‹„newSliderPaddingâŸ©

  Â·â€¿âŸ¨newArrowsVisibleâŸ© â† rg.GuiCheckBoxRefâŸ¨565â€¿280â€¿20â€¿20, "ARROWS_VISIBLE", âŸ¨arrowVisibleâŸ©âŸ©
  rg.GuiSetStyle âŸ¨guiControl.scrollbarâ‹„guiscrollbarproperty.arrowsVisibleâ‹„newArrowsVisibleâŸ©
  
  Â·â€¿âŸ¨newSliderWidthâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿345â€¿90â€¿20, 21â†‘"SLIDER_WIDTH", âŸ¨sliderWidthâŸ©, 2, 100, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.scrollbarâ‹„guiSliderProperty.slider_widthâ‹„newSliderWidthâŸ©

  text â† "SCROLLBAR: "âˆ¾"RIGHT"â€¿"LEFT"âŠ‘Ëœrg.scrollbar_left_side=scrollbarSide

  Â·â€¿âŸ¨newScrollbarSideâŸ© â† rg.GuiToggleRefâŸ¨560â€¿110â€¿200â€¿35, text, âŸ¨scrollbarSideâŸ©âŸ©
  rg.GuiSetStyle âŸ¨guiControl.listViewâ‹„guiListViewProperty.scrollbarSideâ‹„newScrollbarSideâŸ©

  #----------------------------------------------------------
  # ScrollBar style controls
  #----------------------------------------------------------
  rg.GuiGroupBox 550â€¿20â€¿220â€¿135â‹ˆ"SCROLLPANEL STYLE"

  Â·â€¿âŸ¨newScrollbarWidthâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿30â€¿90â€¿20, 18â†‘"SCROLLBAR_WIDTH", âŸ¨scrollbarWidthâŸ©, 6, 30, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.listViewâ‹„guiListViewProperty.scrollbarWidthâ‹„newScrollbarWidthâŸ©

  Â·â€¿âŸ¨newBorderWidthâŸ© â† rg.GuiSpinnerRefâŸ¨670â€¿55â€¿90â€¿20, 20â†‘"BORDER_WIDTH", âŸ¨tempBorderWidthâŸ©, 0, 20, 0âŸ©
  rg.GuiSetStyle âŸ¨guiControl.defaultâ‹„guiControlProperty.borderWidthâ‹„newBorderWidthâŸ©

  newBorderWidthâ€¿newArrowsSizeâ€¿newSliderPaddingâ€¿newSliderWidthâ€¿newArrowsVisibleâ€¿newScrollbarSideâ€¿newScrollbarWidth
}

# Main game loop
PerFrame â† {ğ•ŠpanelScrollâ€¿panelViewâ€¿panelContentRecâ€¿showContentAreaâ€¿drawState:
  rf.DrawTextâŸ¨{ğ•Šaâ€¿b:aâˆ¾", "âˆ¾b}'-'âŸ('Â¯'âŠ¸=)Â¨âˆ˜â€¢ReprÂ¨ 2â†‘panelScroll, 4, 4, 20, redâŸ©

  panelScrollNewâ€¿panelViewNew â† {ğ•ŠpanelScrollâ€¿panelView:
    aâ€¿bâŠ£Â·â€¿âŸ¨aâŸ©â€¿âŸ¨bâŸ©â†rg.GuiScrollPanelRefâŸ¨panelRec, âŸ¨âŸ©, panelContentRec, â‹ˆpanelScroll, â‹ˆpanelViewâŸ©
  }âŒ¾(2â€¿4âŠ¸(â†‘Â¨)) panelScrollâ€¿panelView

  {ğ•¤
    rg.GuiGridRefâŸ¨(panelRec+â—‹(2âŠ¸â†‘)panelScrollNew)âˆ¾2â†“panelContentRec, "", 16, 3, â‹ˆ0â€¿0âŸ©
  } draw._withinRectangle +`2â€¿2â¥ŠpanelViewNew

  (âŒˆâˆ˜Ã·âŸœ10âŒ¾(3âŠ¸âŠ‘)red) r.draw.RectangleâŸshowContentArea +`(panelRec+â—‹(2âŠ¸â†‘)panelScrollNew)â‰Â¯2â†‘panelContentRec

  newDrawState â† DrawStyleEditControls drawState

  Â·â€¿âŸ¨showContentAreaNewâŸ©â†rg.GuiCheckBoxRefâŸ¨565â€¿80â€¿20â€¿20, "SHOW CONTENT AREA", âŸ¨showContentAreaâŸ©âŸ©

  panelContentRecNew â† {ğ•Šwidthâ€¿height:
    âŠ‘Â¨1âŠ‘Â¨rg.GuiSliderBarRefÂ¨âŸ¨
      âŸ¨590â€¿385â€¿145â€¿15, "WIDTH" , â€¢Repr width , â‹ˆwidth , 0, 600âŸ©
      âŸ¨590â€¿410â€¿145â€¿15, "HEIGHT", â€¢Repr height, â‹ˆheight, 0, 400âŸ©
    âŸ©
  }âŒ¾(2âŠ¸â†“) panelContentRec

  panelScrollNewâ€¿panelViewNewâ€¿panelContentRecNewâ€¿showContentAreaNewâ€¿newDrawState
} draw._withCanvas_ r.color.black

Start â† {ğ•¤
  panelContentRec â† 0â€¿0â€¿340â€¿340
  panelView       â† 4â¥Š0
  panelScroll     â† 99â€¿Â¯20â€¿0â€¿0

  showContentArea â† 1

  drawState â† { # Draw and process scroll bar style edition controls
    borderWidth    â‡ 1
    arrowsSize     â‡ 0
    sliderPadding  â‡ 0
    sliderWidth    â‡ 3
    arrowVisible   â‡ 0
    scrollbarSide  â‡ 0
    scrollbarWidth â‡ 6
  }
  PerFrame â€¢_While_(Â¬window.ShouldClose) panelScrollâ€¿panelViewâ€¿panelContentRecâ€¿showContentAreaâ€¿drawState
}

Start window._openAs "raygui - GuiScrollPanel()"
