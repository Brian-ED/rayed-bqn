# Press A to start raylib blast noise
# Press space to start BQNoise blast noise

âŸ¨âŸ¨red, white, blackâŸ©â‡color, window, key, draw, rfâ‡rayffi
âŸ© â† r â† â€¢Import "../../raylib.bqn"
noise â† â€¢Import "BQNoise/wav.bqn"
options â† â€¢Import "BQNoise/options.bqn"

# sets window size to half the monitor size
window.SetSize 0.5

# Wave, audio wave data
wave â† {
  Load â‡ {ğ•Šfilename:
    bqnSound â† {
      freqâ€¿formatâ€¿bqnSound â† noise.ReadFull filename
      Ã·âŸœ(2â‹†Â¯16+1âŠ‘format) bqnSound options.ResampleËœ freqâˆ¾options.freq
    }
    âŸ¨
      1âŠ‘â‰¢bqnSound   # frameCount
      options.freq  # sampleRate
      â€¢Show 1âŠ‘options.fmt # sampleSize
      â‰ bqnSound     # channels
      { # *data
        data â† â¥Šâ‰bqnSound
        dataâŠ¸rf.ReadI16âŠ¸âŠ¢ rf.MemAlloc 2Ã—â‰ data # 2 is byte length of int
      }
    âŸ©
  }

  Unload â‡ rf.MemFree 4âŠ¸âŠ‘

  _with â‡ {(UnloadâŠ¢ğ”½)Load}
}

LoadSound â† rf.LoadSoundFromWave wave._with # fileNameâ†’Sound

PerFrame â† {ğ•Šsoundâ€¿sound2:
  rf.PlaySoundâŸ(key.IsPressed key.space) sound
  rf.PlaySoundâŸ(key.IsPressed key.a) sound2
  ğ•©
} draw._withCanvas_ black

Start â† {ğ•¤
  rf.InitAudioDevice âŸ¨âŸ©
  bqnoiseâ€¿raylib â† (LoadSoundâˆ¾rf.LoadSound)â€¢file.At"testSound.wav"
  PerFrameâ€¢_While_(Â¬window.ShouldClose) bqnoiseâ€¿raylib
  rf.CloseAudioDevice âŸ¨âŸ©
}
Start window._openAs "Hello!!!"