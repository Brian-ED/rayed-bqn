âŸ¨
  GradientLinear â‹„ GradientSquare
âŸ©â‡
# Generate image: linear gradient
# The direction value specifies the direction of the gradient (in degrees)
# with 0 being vertical (from top to bottom), 90 being horizontal (from left to right).
# The gradient effectively rotates counter-clockwise by the specified amount.
GradientLinear â† {ğ•Šsizeâ€¿radianDirectionâ€¿startâ€¿end: # âŸ¨iâ‹„iâŸ©â€¿iâ€¿colorâ€¿color # Generate image: vertical gradient
  angles â† (â€¢math.Cosfâˆ¾â€¢math.Sinf) radianDirection
  >{ğ•Šiâ€¿j:
    # Calculate the relative position of the pixel along the gradient direction
    pos â† (ğ•©âŠ¸Ã—Ã·â—‹(+Â´)sizeâŠ¸Ã—)angles
    factor â† 1âŒŠ0âŒˆpos

    # Generate the color for this pixel
    (endâŠ¸Ã—+startÃ—Â¬)factor
  }Â¨â†•size
}


# Generate image: square gradient
GradientSquare â† {ğ•Šsizeâ€¿densityâ€¿innerâ€¿outer: # âŸ¨iâ‹„iâŸ©â€¿fâ€¿colorâ€¿color # Generate image: square gradient
  center â† sizeÃ·2
  >{ğ•¤
    # Normalize the distances by the dimensions of the gradient rectangle
    normalizedDist â† centerÃ·Ëœ|ğ•©-center

    # Calculate the total normalized Manhattan distance
    manhattanDist â† âŒˆÂ´normalizedDist

    # makes the gradient start from the center when density is 0, and from the edge when density is 1
    factor â† 1âŒŠ0âŒˆ(manhattanDistâŠ¸-Ã·Â¬)density

    # Blend the colors based on the calculated factor
    (outerâŠ¸Ã—+innerÃ—Â¬)factor

  }Â¨â†•size
}